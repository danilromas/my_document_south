# Мой Бизнес ЮГ - Инструкции по настройке

## Описание проекта

Это веб-приложение для управления бизнес-процессами, включающее:
- Систему авторизации для пользователей и сотрудников
- Личные кабинеты для разных типов пользователей
- Управление заявками и услугами
- Панель менеджера для управления сотрудниками
- API интеграцию с бэкендом

## Структура проекта

```
src/
├── components/          # React компоненты
│   ├── ui/             # UI компоненты (shadcn/ui)
│   ├── dashboard/      # Компоненты дашборда пользователя
│   ├── manager/        # Компоненты панели менеджера
│   ├── employee/       # Компоненты панели сотрудника
│   └── ...
├── contexts/           # React контексты
├── hooks/              # Кастомные хуки
├── lib/                # Утилиты и API клиент
├── pages/              # Страницы приложения
└── ...
```

## Установка и запуск

### Предварительные требования

- Node.js 18+ 
- npm или yarn
- Go 1.19+ (для бэкенда)

### 1. Установка зависимостей

```bash
npm install
```

### 2. Настройка переменных окружения

Создайте файл `.env` в корне проекта:

```env
VITE_API_BASE_URL=http://localhost:3000
```

### 3. Запуск бэкенда

Перейдите в папку бэкенда и запустите:

```bash
cd my_documents_south-backend-main
go mod tidy
go run cmd/app/main.go
```

Бэкенд будет доступен по адресу: `http://localhost:3000`

### 4. Запуск фронтенда

```bash
npm run dev
```

Фронтенд будет доступен по адресу: `http://localhost:5173`

## Основные функции

### Авторизация и регистрация

- **Регистрация пользователей**: `/signup` - форма регистрации обычных пользователей
- **Регистрация сотрудников**: `/signup` (вкладка "Сотрудник") - форма регистрации сотрудников
- **Вход в систему**: `/login` - форма авторизации для пользователей и сотрудников

### Личные кабинеты

- **Пользователь**: `/dashboard` - просмотр заявок, создание новых заявок, управление профилем
- **Сотрудник**: `/employee` - просмотр назначенных заявок, обновление статусов, уведомления
- **Менеджер**: `/manager` - управление заявками, назначение сотрудников, создание сотрудников

### API интеграция

Все компоненты подключены к реальному API:
- Загрузка данных пользователей и сотрудников
- Создание и обновление заявок
- Управление статусами заявок
- Назначение сотрудников на заявки

## Технические особенности

### Используемые технологии

- **React 18** с TypeScript
- **React Router** для маршрутизации
- **TanStack Query** для управления состоянием сервера
- **shadcn/ui** для UI компонентов
- **Tailwind CSS** для стилизации
- **React Hook Form** для форм

### Архитектура

- **Контекст авторизации**: Управление состоянием пользователя
- **API клиент**: Централизованный клиент для всех API запросов
- **Защищенные маршруты**: Автоматическое перенаправление неавторизованных пользователей
- **Обработка ошибок**: Error Boundary для обработки неожиданных ошибок

### Безопасность

- Защищенные маршруты с проверкой типа пользователя
- Токен-базированная авторизация
- Валидация форм на клиенте и сервере

## Структура API

### Основные эндпоинты

- `POST /pub/users/signup` - Регистрация пользователя
- `POST /pub/employee/signup` - Регистрация сотрудника
- `POST /pub/auth/login` - Авторизация
- `GET /prot/request` - Получение заявок (с фильтрами)
- `POST /prot/request` - Создание заявки
- `PATCH /prot/request/{id}/status` - Обновление статуса заявки
- `PATCH /prot/request/{id}/employee` - Назначение сотрудника

### Модели данных

- **User**: Пользователь с персональными данными и тарифом
- **Employee**: Сотрудник с ролью и специализациями
- **Request**: Заявка с привязкой к пользователю, услуге и сотруднику
- **Service**: Услуга, предоставляемая компанией
- **Role**: Роль сотрудника в системе

## Развертывание

### Продакшн сборка

```bash
npm run build
```

### Предварительный просмотр

```bash
npm run preview
```

## Устранение неполадок

### Частые проблемы

1. **Ошибка CORS**: Убедитесь, что бэкенд запущен и настроен для работы с фронтендом
2. **Ошибки авторизации**: Проверьте, что токен сохраняется в localStorage
3. **Проблемы с загрузкой данных**: Проверьте сетевые запросы в DevTools

### Логи

Все ошибки API логируются в консоль браузера. Для более детальной отладки используйте React DevTools и TanStack Query DevTools.

## Дальнейшее развитие

### Планируемые функции

- Реальная система уведомлений
- Файловые загрузки для заявок
- Расширенная аналитика для менеджеров
- Мобильная версия приложения
- Интеграция с внешними сервисами

### Возможные улучшения

- Добавление тестов (Jest, React Testing Library)
- Оптимизация производительности
- Улучшение UX/UI
- Добавление темной темы
- Многоязычность

## Поддержка

При возникновении проблем:
1. Проверьте логи в консоли браузера
2. Убедитесь, что все зависимости установлены
3. Проверьте, что бэкенд запущен и доступен
4. Обратитесь к документации используемых библиотек
